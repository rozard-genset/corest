<!-- render path vars -->
{{- $engine_css := "" -}}
{{- $engine_jsx := "" -}}
{{- $primer_css := "" -}}
{{- $primer_jsx := "" -}}
{{- $footer_css := "" -}}
{{- $footer_jsx := "" -}}


<!-- themes -->
{{- $vars_themes := "default" -}}
{{- with .Site.Params.Themes -}}{{- $vars_themes = . -}}{{- end -}}


<!-- footer -->
{{- $vars_footer := "core" -}}
{{- with .Site.Params.Render.Footer -}}{{- $vars_footer = . -}}{{- end -}}


<!-- model -->
{{- $vars_models := "main" -}}
{{- with .Page.Params.Model -}}{{- $vars_models = . -}}{{- end -}}



<!-- main scripts processing block -->
{{- $engine_css := "" -}}{{- $engine_jsx := "" -}}
{{- $theme_engine := printf "scripts/themes/%s/basics" $vars_themes -}}
{{- $falen_engine := printf "scripts/themes/default/basics" $vars_themes -}}

{{- range ( slice $falen_engine $theme_engine ) -}}

    {{- $css := printf "%s/pack.scss" . -}}
    {{- $jsx := printf "%s/pack.js" .   -}}
    {{- with resources.Get $css -}}{{- $engine_css = $css -}}{{- end -}}
    {{- with resources.Get $jsx -}}{{- $engine_jsx = $jsx -}}{{- end -}}

{{- end -}}{{- .Store.Set "engine_css" $engine_css -}}{{- .Store.Set "engine_jsx" $engine_jsx -}}




<!-- module scripts processing block -->
{{- $primer_css := "" -}}{{-  $primer_jsx := "" -}}
{{- $skin_paths := ( trim .Page.RelPermalink "/" ) -}}
{{- $falen_path := printf "scripts/themes/default/model/page/%s" $vars_models -}}
{{- $prime_path := printf "scripts/themes/default/model/page/%s" $vars_models -}}
{{- $theme_path := printf "scripts/themes/%s/model/page/%s" $vars_themes $vars_models -}}
{{- $prime_page := printf "scripts/themes/default/model/page/%s"  $skin_paths -}}
{{- $theme_page := printf "scripts/themes/%s/model/page/%s" $vars_themes $skin_paths -}}


{{- if and ( .Section ) ( .IsPage ) -}}
    {{- $prime_path = printf "scripts/module/%s/page/%s" .Section $vars_models -}}
    {{- $theme_path = printf "scripts/themes/%s/module/%s/page/%s" $vars_themes .Section $vars_models -}}    
{{- end -}}


{{- range ( slice $falen_path $prime_path $theme_path $prime_page $theme_page ) -}}

    {{- $css := printf "%s/css/pack.scss" . -}}
    {{- $jsx := printf "%s/jsx/pack.js" .   -}}
    {{- with resources.Get $css -}}{{- $primer_css = $css -}}{{- end -}}
    {{- with resources.Get $jsx -}}{{- $primer_jsx = $jsx -}}{{- end -}}

{{- end -}}{{- .Store.Set "primer_css" $primer_css -}}{{- .Store.Set "primer_jsx" $primer_jsx -}}




<!-- parted scripts processing block -->
{{- $footer_css := "" -}}
{{- $footer_jsx := "" -}}
{{- $theme_footer := printf "scripts/themes/%s/parted/footer/%s" $vars_themes $vars_footer -}}
{{- $falen_footer := printf "scripts/themes/default/parted/footer/core" -}}

{{- range ( slice $falen_footer $theme_footer ) -}}

    {{- $css := printf "%s/pack.scss" . -}}
    {{- $jsx := printf "%s/pack.js" .   -}}
    {{- with resources.Get $css -}}{{- $footer_css = . -}}{{- end -}}
    {{- with resources.Get $jsx -}}{{- $footer_jsx = . -}}{{- end -}}

{{- end -}}{{- .Store.Set "footer_css" $footer_css -}}{{- .Store.Set "footer_jsx" $footer_jsx -}}



<!-- block scripts processing block -->
{{- if .Page.Params.Block -}}
    {{- partial "lib/blocks/pack-css.html" . -}}
    {{- partial "lib/blocks/pack-jsx.html" . -}}
{{- end -}}


<!-- modul scripts processing block -->
{{- partial "lib/modul/pack-css.html" . -}}
{{- partial "lib/modul/pack-jsx.html" . -}}