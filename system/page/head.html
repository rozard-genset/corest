<!-- render path vars -->
{{- $engine_css := "" -}}
{{- $engine_jsx := "" -}}
{{- $primer_css := "" -}}
{{- $primer_jsx := "" -}}
{{- $header_css := "" -}}
{{- $header_jsx := "" -}}


<!-- themes -->
{{- $vars_themes := "default" -}}
{{- with .Site.Params.Themes -}}{{- $vars_themes = . -}}{{- end -}}


<!-- header -->
{{- $vars_header := "core" -}}
{{- with .Site.Params.Render.Header -}}{{- $vars_header = . -}}{{- end -}}


<!-- model -->
{{- $vars_models := "main" -}}
{{- with .Page.Params.Model -}}{{- $vars_models = . -}}{{- end -}}



<!-- main scripts processing block -->
{{- $engine_css := "" -}}{{- $engine_jsx := "" -}}
{{- $theme_engine := printf "scripts/themes/%s/core" $vars_themes -}}
{{- $falen_engine := printf "scripts/themes/default/core" $vars_themes -}}

{{- range ( slice $falen_engine $theme_engine ) -}}

    {{- $css := printf "%s/head.scss" . -}}
    {{- $jsx := printf "%s/head.js" .   -}}
    {{- with resources.Get $css -}}{{- $engine_css = $css -}}{{- end -}}
    {{- with resources.Get $jsx -}}{{- $engine_jsx = $jsx -}}{{- end -}}

{{- end -}}{{- .Store.Set "engine_css" $engine_css -}}{{- .Store.Set "engine_jsx" $engine_jsx -}}




<!-- module scripts processing block -->
{{- $primer_css := "" -}}{{-  $primer_jsx := "" -}}
{{- $skin_paths := ( trim .Page.RelPermalink "/" ) -}}
{{- $falen_path := printf "scripts/themes/default/page/%s" $vars_models -}}
{{- $prime_path := printf "scripts/themes/default/page/%s" $vars_models -}}
{{- $theme_path := printf "scripts/themes/%s/page/%s" $vars_themes $vars_models -}}
{{- $prime_page := printf "scripts/themes/default/page/%s"  $skin_paths -}}
{{- $theme_page := printf "scripts/themes/%s/page/%s" $vars_themes $skin_paths -}}


{{- if and ( .Section ) ( .IsPage ) -}}
    {{- $prime_path = printf "scripts/module/%s/page/%s" .Section $vars_models -}}
    {{- $theme_path = printf "scripts/themes/%s/module/%s/page/%s" $vars_themes .Section $vars_models -}}    
{{- end -}}



{{- range ( slice $falen_path $prime_path $theme_path $prime_page $theme_page ) -}}

    {{- $css := printf "%s/css/head.scss" . -}}
    {{- $jsx := printf "%s/jsx/head.js" .   -}}
    {{- with resources.Get $css -}}{{- $primer_css = $css -}}{{- end -}}
    {{- with resources.Get $jsx -}}{{- $primer_jsx = $jsx -}}{{- end -}}

{{- end -}}{{- .Store.Set "primer_css" $primer_css -}}{{- .Store.Set "primer_jsx" $primer_jsx -}}





<!-- parted scripts processing block -->
{{- $header_css := "" -}}
{{- $header_jsx := "" -}}
{{- $theme_header := printf "scripts/parted/header/%s" $vars_header -}}
{{- $falen_header := printf "scripts/parted/header/core" -}}

{{- range ( slice $falen_header $theme_header ) -}}

    {{- $css := printf "%s/head.scss" . -}}
    {{- $jsx := printf "%s/head.js" .   -}}
    {{- with resources.Get $css -}}{{- $header_css = . -}}{{- end -}}
    {{- with resources.Get $jsx -}}{{- $header_jsx = . -}}{{- end -}}

{{- end -}}{{- .Store.Set "header_css" $header_css -}}{{- .Store.Set "header_jsx" $header_jsx -}}


<!-- block scripts processing block -->
{{- if .Page.Params.Block -}}
    {{- partial "lib/blocks/head-css.html" . -}}
    {{- partial "lib/blocks/head-jsx.html" . -}}
{{- end -}}


<!-- compiler scripts processing block -->
{{- partial "bin/help/hcss.html" . -}}
{{- partial "bin/help/hjsx.html" . -}}