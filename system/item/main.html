<!-- variable -->
{{- $render := "" -}}

{{- $theme := "default" -}}
{{- with .Site.Params.System.Themes -}}{{- $theme = ( . | urlize ) -}}{{- end -}}

{{- $model := "main" -}}
{{- with .Page.Params.Module.Layout -}}{{- $model = ( . | urlize ) -}}{{- end -}}

{{- $modul := "default" -}}
{{- with .Section -}}{{- $modul = ( . | urlize ) -}}{{- end -}}


<!-- conditional -->
{{- $item_based_block := printf "lib/blocks.html" -}}

{{- $item_based_theme := printf "themes/default/item/main/render.html" -}}
{{- $item_based_modul := printf "module/default/item/main/render.html" -}}

{{- $item_theme_cores := printf "themes/%s/item/main/render.html" $theme  -}}
{{- $item_theme_model := printf "themes/%s/item/%s/render.html"   $theme $model -}}

{{- $item_modul_cores := printf "module/%s/item/main/render.html" $modul  -}}
{{- $item_modul_model := printf "module/%s/item/%s/render.html"   $modul $model -}}

{{- $item_theme_modul := printf "themes/%s/module/%s/layout/item/main/render.html" $theme $modul  -}}
{{- $item_theme_skins := printf "themes/%s/module/%s/layout/item/%s/render.html"   $theme $modul $model -}}



<!-- validation -->
{{- if templates.Exists ( printf "partials/%s" $item_based_theme )  -}}
    {{- $render = $item_based_theme -}}
{{- end -}}

{{- if templates.Exists ( printf "partials/%s" $item_based_modul )  -}}
    {{- $render = $item_based_modul -}}
{{- end -}}

{{- if templates.Exists ( printf "partials/%s" $item_theme_cores )  -}}
    {{- $render = $item_theme_cores -}}
{{- end -}}

{{- if templates.Exists ( printf "partials/%s" $item_theme_model )  -}}
    {{- $render = $item_theme_model -}}
{{- end -}}

{{- if templates.Exists ( printf "partials/%s" $item_modul_cores )  -}}
    {{- $render = $item_modul_cores -}}
{{- end -}}

{{- if templates.Exists ( printf "partials/%s" $item_modul_model )  -}}
    {{- $render = $item_modul_model -}}
{{- end -}}

{{- if templates.Exists ( printf "partials/%s" $item_theme_modul )  -}}
    {{- $render = $item_theme_modul -}}
{{- end -}}

{{- if templates.Exists ( printf "partials/%s" $item_theme_skins )  -}}
    {{- $render = $item_theme_skins -}}
{{- end -}}

{{- if .Page.Params.Block -}}
    {{- $render = $item_based_block -}}
{{- end -}}

<!-- execution -->
{{- if templates.Exists ( printf "partials/%s" $render )  -}}
    {{- partial $render . -}}
{{- end -}}