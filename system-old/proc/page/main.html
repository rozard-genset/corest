<!-- 
    type  : page
    block : main   
-->

{{- $renders := printf "module/default/model/page/main.html" -}}
{{- $default := printf "themes/default/%s/main.html" ( trim .Page.RelPermalink "/" ) }}
{{- $theming := printf "themes/%s/%s/main.html" .Site.Params.Themes ( trim .Page.RelPermalink "/" ) }}


{{ if .Section }}

    {{- $section := printf "module/%s/default/model/page/main.html" .Section | printf "%s" -}}

    {{- if and ( .Page.Params.Paged ) ( .Page.Params.Model ) -}}

        {{- $parteds := printf "module/%s/%s/model/%s/main.html" .Section .Page.Params.Model .Page.Params.Paged  | printf "%s" -}}
        {{- with templates.Exists ( printf "partials/%s"  $parteds ) }}{{ $renders = $parteds }}{{- end -}}

    {{- else if .Page.Params.Model -}}

        {{- $parteds := printf "module/%s/%s/model/page/main.html" .Section .Page.Params.Model | printf "%s" -}}
        {{- with templates.Exists ( printf "partials/%s"  $parteds ) }}{{ $renders = $parteds }}{{- end -}}

    {{- else if .Page.Params.Paged -}}

        {{- $parteds := printf "module/%s/default/model/%s/main.html" .Section .Page.Params.Paged | printf "%s" -}}
        {{- with templates.Exists ( printf "partials/%s"  $parteds ) }}{{ $renders = $parteds }}{{- end -}}

    {{- else if templates.Exists ( printf "partials/%s"  $section )  -}}
        
        {{- $renders = $section -}}

    {{- end -}}

{{- else if and ( .IsHome ) ( .Site.Params.Themes ) -}}
  
    {{- $renders = printf "themes/%s/home/main.html" .Site.Params.Themes -}}

{{- else if .IsHome -}}

    {{- $renders = printf "module/default/model/home/main.html" -}}

{{- else if templates.Exists ( printf "partials/%s" $theming ) -}}

    {{- $renders = $theming -}}

{{- else if templates.Exists ( printf "partials/%s" $default ) -}}

    {{- $renders = $default -}}

{{- end -}}

{{- $renders -}}