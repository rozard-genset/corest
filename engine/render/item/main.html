<!-- variable -->
{{- $themes := partial "lib/get-themes.html" . -}}
{{- $module := partial "lib/get-module.html" . -}}
{{- $layout := partial "lib/get-layout.html" . -}}
{{- $models := partial "lib/get-models.html" . -}}



<!-- store -->
{{- $render := printf "themes/default/item/main/render.html" -}}


<!-- model -->
{{- $based := printf "themes/%s/item/%s/render.html" $themes $layout -}}
{{- $modul := printf "%s/module/item/%s/render.html" $module $layout -}}
{{- $model := printf "themes/%s/module/%s/layout/item/%s/render.html" $themes $module $layout -}}


<!-- homer -->
{{- if eq .Parent.Kind "home" -}}
    {{- $based = printf "themes/%s/base/main/render.html" $themes -}}
    {{- $modul = printf "%s/module/base/%s/render.html" $module $layout -}}
    {{- $model = printf "themes/%s/module/%s/base/%s/render.html" $themes $module $layout -}}
{{- end -}}


<!-- block -->
{{- if .Page.Params.Blocks -}}{{- $render = printf "lib/blocks.html" -}}{{- end -}}


<!-- module -->
{{- range (slice $based $modul $model ) -}}
    {{- if templates.Exists ( printf "partials/%s" . ) -}}{{- $render = . -}}{{- end -}}
{{- end -}}


<!-- render -->
{{- if templates.Exists ( printf "partials/%s" $render )  -}}
    {{- partial $render . -}}
{{- end -}}