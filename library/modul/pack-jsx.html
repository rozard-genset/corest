{{- $engine_src := resources.Get "scripts/themes/default/basics/none.js" -}}
{{- $primer_src := resources.Get "scripts/themes/default/basics/none.js" -}}
{{- $footer_src := resources.Get "scripts/themes/default/basics/none.js" -}}
{{- $format_src := resources.Get "scripts/themes/default/basics/none.js" -}}
{{- $destinates := printf "%s/script.js" ( partial "lib/bases/dest.html" . ) -}}


{{- with .Store.Get "engine_jsx" -}}
    {{- $engine_src = resources.Get . -}}
{{- end -}}

{{- with .Store.Get "primer_jsx" -}}
    {{- $primer_src = resources.Get . -}}
{{- end -}}

{{- with .Store.Get "footer_jsx" -}}
    {{- $footer_src = resources.Get . -}}
{{- end -}}


{{- if and ( resources.Get $engine_src ) ( resources.Get $footer_src ) ( resources.Get $primer_src )  -}}

    {{- $opts := dict "minify" (not hugo.IsDevelopment) "sourceMap" (cond hugo.IsDevelopment "external" "") "targetPath" $destinates -}}
    {{- $path := slice $engine_src $footer_src $primer_src | resources.Concat $destinates -}}

    {{- with $path | js.Build $opts -}}
        <script id="rozard-primus-script" src="{{ .RelPermalink }}" crossorigin="anonymous" defer></script>
    {{- end -}}

{{- end -}}