{{- $block_type := slice "hero" -}}
{{- $block_path := "" -}}
{{- $pages_vars := . -}}

{{- range ( index .Page.Params.Block ) -}}

    {{- $block_vars := .type -}}
    {{- $block_page := .data -}}

    {{- range $block_type -}}{{- $block_path = printf "blocks/%s/%s.html" . $block_vars -}}
        {{- if templates.Exists ( printf "partials/%s" $block_path )  -}}
            {{- partial $block_path $block_page -}}
        {{- end -}}
    {{- end -}}

{{- end -}}