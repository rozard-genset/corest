<!-- populate term -->
{{- $term_all := slice -}}{{- $list_all := slice -}} 
{{- $taxo_all := where .Site.Pages "Type" .Section -}}
{{- $page_all := where .Site.RegularPages "Type" .Section -}}

{{- range $taxo_all -}}
    {{- if eq .Page.Params.Module.Layout "term" -}}
        {{- $term_all = $term_all | append . -}}
    {{- end -}}
{{- end -}}

{{- $term_all = $term_all | uniq -}}

{{- range $term_all -}}
    {{- $page_now := .Title -}}
    {{- $term_now := slice ( .Title | urlize ) -}}
    {{- $page_map := slice   -}}
    {{- range $page_all -}}
        {{- if collections.Intersect $term_now .Page.Params.terms -}}
            {{- $page_map = $page_map | append . -}}
        {{- end -}}
    {{- end -}}
   {{ $list_all = $list_all | append ( dict "name" $page_now  "page" . "list" $page_map ) }}
{{- end -}}

{{- return $list_all -}}